(()=>{var e={593:e=>{"use strict";e.exports=require("https://jslib.k6.io/url/1.0.0/index.js")},795:e=>{"use strict";e.exports=require("k6/encoding")},255:e=>{"use strict";e.exports=require("k6/html")},409:e=>{"use strict";e.exports=require("k6/http")},97:(e,r,t)=>{const n=t(409);e.exports.get=function(e,r){return n.get(e,r)},e.exports.post=function(e,r,t){return n.post(e,r,t)}},175:(e,r,t)=>{const n=t(934),s=t(731),a=t(97);e.exports.getAuthorizationToken=function(e){if(void 0!==__ENV.WEB_CLIENT_URL||""!==__ENV.WEB_CLIENT_URL.trim()){var r=__ENV.WEB_CLIENT_USERNAME,t=__ENV.WEB_CLIENT_PASSWORD,o=__ENV.WEB_CLIENT_URL;!1===o.endsWith("/")&&(o+="/"),o+="settings.js";let n=a.get(o);200!==n.status&&console.error(`Request to ${n.request.url} returned with status ${n.status}`);var i=new RegExp(/clientId:([^,\r\n}]*)/).exec(n.body),c=i[1].trim().replace(/"/g,""),p=void 0;null!=(i=new RegExp(/clientSecret:([^,\r\n}]*)/).exec(n.body))&&i.length>=1&&(p=i[1].trim().replace(/"/g,""));var d;d=null!=(i=new RegExp(/scopes:([^,\r\n}]*)/).exec(n.body))&&i.length>=1?i[1].trim().replace(/"/g,""):"ingr.api";var l=(i=new RegExp(/redirectUri:([^,\r\n}]*)/).exec(n.body))[1].trim().replace(/"/g,""),u=(i=new RegExp(/identityProvider:([^,\r\n}]*)/).exec(n.body))[1].trim().replace(/"/g,""),h=void 0;null!=(i=new RegExp(/resource:([^,\r\n}]*)/).exec(n.body))&&i.length>=1&&(h=i[1].trim().replace(/"/g,""));var g=(i=new RegExp(/usePKCE:([^,\r\n}]*)/).exec(n.body))[1].trim().replace(/"/g,"");(i=new RegExp(/dummyClientSecret:([^,\r\n}]*)/).exec(n.body)).length<1&&void 0===i[1]&&console.error("dummyClientSecret not found.");var _=i[1].trim().replace(/"/g,""),m=(i=new RegExp(/url:([^,\r\n}]*)/).exec(n.body))[1].trim().replace(/"/g,"");!1===m.endsWith("/")&&(m+="/"),n=a.get(m+"description");var x=JSON.parse(n.body.replace(/[\r\n\t]/g,"")).TokenIssuerUri;void 0!==e&&""!==e||(e={},e=void 0===u?{OKTA:{authURL:x,clientId:c,clientSecret:p,scopes:d,usePKCE:g,odataURL:m,redirectUri:l,userCredential:{username:r,password:t}}}:{SAM:{authURL:x,clientId:c,clientSecret:_,scopes:d,usePKCE:g,odataURL:m,redirectUri:l,identityProvider:u,resource:h,userCredential:{username:r,password:t}}})}return void 0!==e.OKTA?n.getOktaAuthorizationToken(e.OKTA):s.getSamAuthorizationToken(e.SAM)}},934:(e,r,t)=>{const n=t(795),s=t(593),a=t(97);e.exports.getOktaAuthorizationToken=function(e){const r=e.authURL,t=e.clientId,o=e.usePKCE,i=e.userCredential.username,c=e.userCredential.password,p=e.clientSecret,d=e.redirectUri,l=e.scopes,u="state";let h;if("true"===o.toLowerCase()){const e=`${new s.URL(r).origin}/api/v1/authn`;var g={username:i,password:c},_={headers:{"Content-Type":"application/json"}};h=a.post(e,JSON.stringify(g),_);var m=JSON.parse(h.body).sessionToken;const n=new s.URL(`${r}/v1/authorize`);n.searchParams.append("client_id",t),n.searchParams.append("code_challenge","h80cqY8rnCLt6_4c9K3uaaitV5M26tROeoqFIUIl-BI"),n.searchParams.append("code_challenge_method","S256"),n.searchParams.append("redirect_uri",d),n.searchParams.append("response_type","code"),n.searchParams.append("sessionToken",m),n.searchParams.append("state",u),n.searchParams.append("nonce","nonce"),n.searchParams.append("scope",l),_={headers:{"Content-Type":"application/json"},redirects:0},h=a.get(n.toString(),_);var x=new RegExp(/code=([^&]*)/).exec(h.headers.Location.toString())[1];const o=new s.URL(`${r}/v1/token`);o.searchParams.append("state",u);const p={};p.client_id=t,p.grant_type="authorization_code",p.redirect_uri=d,p.code=x,p.code_verifier="0LG2f0VQBDHBiF_h2tVxFtGhVnGB~MpC6ifc-S1MCuZWC8644u7ZrIb3xlDMU.4a53ESoH_yqhi.d1be3fPcVs1.z1Td7R4zncl~-AxrJ2JPPtEUS9joBtbOu.BQyFR8",h=a.post(o.toString(),p,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}else{const e=new s(`${new s.URL(r).origin}/v1/token`),o={scope:l};if(""===i){o.grant_type="client_credentials";const r={auth:"basic",headers:{Authorization:`Basic ${n.b64encode(`${t}:${p}`)}`}};h=a.post(e.toString(),o,r)}else o.grant_type="password",o.username=i,o.password=c,o.client_id=t,o.client_secret=p,h=a.post(e.toString(),o)}return e.accessToken=h.json().access_token,e}},731:(e,r,t)=>{const n=t(255),s=t(97);e.exports.getSamAuthorizationToken=function(e){const r=e.authURL,t=e.clientId,a=e.usePKCE,o=e.userCredential.username,i=e.userCredential.password,c=e.clientSecret,p=e.identityProvider,d=e.resource,l=e.redirectUri,u=e.scopes;let h;if("true"===a.toLowerCase()){const e=new URL(`${r}/connect/authorize`);e.searchParams.append("client_id",t),e.searchParams.append("client_secret",c),e.searchParams.append("code_challenge","h80cqY8rnCLt6_4c9K3uaaitV5M26tROeoqFIUIl-BI"),e.searchParams.append("code_challenge_method","S256"),e.searchParams.append("redirect_uri",l),e.searchParams.append("response_type","code"),e.searchParams.append("state","state"),e.searchParams.append("nonce","nonce"),e.searchParams.append("scope",u),e.searchParams.append("acr_values",`idp:${p}`);var g={headers:{"Content-Type":"application/x-www-form-urlencoded"}};h=s.get(e.toString());const a=n.parseHTML(h.body).find("html").children("body").children("script").text(),d=JSON.parse(a.replace(/&quot;/g,'"')),w=new RegExp(/signin=([^&]*)/).exec(d.loginUrl.toString())[1],v=d.antiForgery.value,y=new URL(`${r}/login`);y.searchParams.append("signin",w);var _={headers:{"Content-Type":"application/x-www-form-urlencoded"}},m={};m.username=o,m.password=i,m.provider=p,m["idsrv.xsrf"]=v,h=s.post(y.toString(),m,_);var x=new RegExp(/code=([^&]*)/).exec(h.url)[1];const E=new URL(`${r}/connect/token`);_={headers:{"Content-Type":"application/x-www-form-urlencoded"}},(m={}).client_id=t,m.client_secret=c,m.code=x,m.code_verifier="0LG2f0VQBDHBiF_h2tVxFtGhVnGB~MpC6ifc-S1MCuZWC8644u7ZrIb3xlDMU.4a53ESoH_yqhi.d1be3fPcVs1.z1Td7R4zncl~-AxrJ2JPPtEUS9joBtbOu.BQyFR8",m.grant_type="authorization_code",m.redirect_uri=l,h=s.post(E.toString(),m,_)}else{const e=new URL(`${r}/connect/token`),n={scope:u};""===o?(n.grant_type="client_credentials",n.resource=d,n.client_id=t,n.client_secret=c,h=s.post(e.toString(),n,g)):(n.grant_type="password",n.username=o,n.password=i,n.client_id=t,n.client_secret=c,n.resource=d,h=s.post(e.toString(),n))}return e}}},r={},t=function t(n){var s=r[n];if(void 0!==s)return s.exports;var a=r[n]={exports:{}};return e[n](a,a.exports,t),a.exports}(175),n=exports;for(var s in t)n[s]=t[s];t.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})})();