(()=>{var e={593:e=>{"use strict";e.exports=require("https://jslib.k6.io/url/1.0.0/index.js")},795:e=>{"use strict";e.exports=require("k6/encoding")},255:e=>{"use strict";e.exports=require("k6/html")},409:e=>{"use strict";e.exports=require("k6/http")},97:(e,r,t)=>{const n=t(409);e.exports.get=function(e,r){return n.get(e,r)},e.exports.post=function(e,r,t){return n.post(e,r,t)}},175:(e,r,t)=>{const n=t(934),o=t(731),s=t(97);e.exports.getAuthorizationToken=function(e){if(void 0!==__ENV.WEB_CLIENT_URL||""!==__ENV.WEB_CLIENT_URL.trim()){var r=__ENV.WEB_CLIENT_USERNAME,t=__ENV.WEB_CLIENT_PASSWORD,a=__ENV.WEB_CLIENT_URL;!1===a.endsWith("/")&&(a+="/"),a+="settings.js";let n=s.get(a);200!==n.status&&console.error(`Request to ${n.request.url} returned with status ${n.status}`);var c=new RegExp(/clientId:([^,\r\n}]*)/).exec(n.body);null==c&&(c=new RegExp(/"clientId":([^,\r\n}]*)/).exec(n.body));var i,d=c[1].trim().replace(/"/g,"");i=null!=(c=new RegExp(/scopes:([^,\r\n}]*)/).exec(n.body))&&c.length>=1?c[1].trim().replace(/"/g,""):"ingr.api",null==(c=new RegExp(/redirectUri:([^,\r\n}]*)/).exec(n.body))&&(c=new RegExp(/"redirectUri":([^,\r\n}]*)/).exec(n.body));var p,l=c[1].trim().replace(/"/g,"");null==(c=new RegExp(/identityProvider:([^,\r\n}]*)/).exec(n.body))&&(c=new RegExp(/"identityProvider":([^,\r\n}]*)/).exec(n.body)),p=c[1].trim().replace(/"/g,"");var u=void 0;null!=(c=new RegExp(/resource:([^,\r\n}]*)/).exec(n.body))&&c.length>=1&&(u=c[1].trim().replace(/"/g,"")),null==(c=new RegExp(/usePKCE:([^,\r\n}]*)/).exec(n.body))&&(c=new RegExp(/"usePKCE":([^,\r\n}]*)/).exec(n.body));var g=c[1].trim().replace(/"/g,"");null==(c=new RegExp(/dummyClientSecret:([^,\r\n}]*)/).exec(n.body))&&(c=new RegExp(/"dummyClientSecret":([^,\r\n}]*)/).exec(n.body)),c.length<1&&void 0===c[1]&&console.error("dummyClientSecret not found.");var h=c[1].trim().replace(/"/g,"");null==(c=new RegExp(/url:([^,\r\n}]*)/).exec(n.body))&&(c=new RegExp(/"url":([^,\r\n}]*)/).exec(n.body));var _=c[1].trim().replace(/"/g,"");!1===_.endsWith("/")&&(_+="/"),n=s.get(_+"description");var x=JSON.parse(n.body.replace(/[\r\n\t]/g,"")),m=x.TokenIssuerUri;void 0!==u&&""!==u||(u=x.TokenAudience),void 0!==e&&""!==e||(e={},e=void 0===p||""===p?{OKTA:{authURL:m,clientId:d,clientSecret:h,scopes:i,usePKCE:g,odataURL:_,redirectUri:l,userCredential:{username:r,password:t}}}:{SAM:{authURL:m,clientId:d,clientSecret:h,scopes:i,usePKCE:g,odataURL:_,redirectUri:l,identityProvider:p,resource:u,userCredential:{username:r,password:t}}})}return void 0!==e.OKTA?n.getOktaAuthorizationToken(e.OKTA):o.getSamAuthorizationToken(e.SAM)}},934:(e,r,t)=>{const n=t(795),o=t(593),s=t(97);e.exports.getOktaAuthorizationToken=function(e){const r=e.authURL,t=e.clientId,a=e.usePKCE,c=e.userCredential.username,i=e.userCredential.password,d=e.clientSecret,p=e.redirectUri,l=e.scopes,u="state";let g;if("true"===a.toLowerCase()){const e=`${new o.URL(r).origin}/api/v1/authn`;var h={username:c,password:i},_={headers:{"Content-Type":"application/json"}};g=s.post(e,JSON.stringify(h),_);var x=JSON.parse(g.body).sessionToken;const n=new o.URL(`${r}/v1/authorize`);n.searchParams.append("client_id",t),n.searchParams.append("code_challenge","h80cqY8rnCLt6_4c9K3uaaitV5M26tROeoqFIUIl-BI"),n.searchParams.append("code_challenge_method","S256"),n.searchParams.append("redirect_uri",p),n.searchParams.append("response_type","code"),n.searchParams.append("sessionToken",x),n.searchParams.append("state",u),n.searchParams.append("nonce","nonce"),n.searchParams.append("scope",l),_={headers:{"Content-Type":"application/json"},redirects:0},g=s.get(n.toString(),_);var m=new RegExp(/code=([^&]*)/).exec(g.headers.Location.toString())[1];const a=new o.URL(`${r}/v1/token`);a.searchParams.append("state",u);const d={};d.client_id=t,d.grant_type="authorization_code",d.redirect_uri=p,d.code=m,d.code_verifier="0LG2f0VQBDHBiF_h2tVxFtGhVnGB~MpC6ifc-S1MCuZWC8644u7ZrIb3xlDMU.4a53ESoH_yqhi.d1be3fPcVs1.z1Td7R4zncl~-AxrJ2JPPtEUS9joBtbOu.BQyFR8",g=s.post(a.toString(),d,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}else{const e=new o(`${new o.URL(r).origin}/v1/token`),a={scope:l};if(""===c){a.grant_type="client_credentials";const r={auth:"basic",headers:{Authorization:`Basic ${n.b64encode(`${t}:${d}`)}`}};g=s.post(e.toString(),a,r)}else a.grant_type="password",a.username=c,a.password=i,a.client_id=t,a.client_secret=d,g=s.post(e.toString(),a)}return e.accessToken=g.json().access_token,e}},731:(e,r,t)=>{const n=t(255),o=t(97);e.exports.getSamAuthorizationToken=function(e){const r=e.authURL,t=e.clientId,s=e.usePKCE,a=e.userCredential.username,c=e.userCredential.password,i=e.clientSecret,d=e.identityProvider,p=e.resource,l=e.redirectUri,u=e.scopes;let g;if("true"===s.toLowerCase()){const e=new URL(`${r}/connect/authorize`);e.searchParams.append("client_id",t),e.searchParams.append("client_secret",i),e.searchParams.append("code_challenge","h80cqY8rnCLt6_4c9K3uaaitV5M26tROeoqFIUIl-BI"),e.searchParams.append("code_challenge_method","S256"),e.searchParams.append("redirect_uri",l),e.searchParams.append("response_type","code"),e.searchParams.append("state","state"),e.searchParams.append("nonce","nonce"),e.searchParams.append("scope",u),e.searchParams.append("acr_values",`idp:${d}`);var h={headers:{"Content-Type":"application/x-www-form-urlencoded"}};g=o.get(e.toString());const s=n.parseHTML(g.body).find("html").children("body").children("script").text(),w=JSON.parse(s.replace(/&quot;/g,'"')),y=new RegExp(/signin=([^&]*)/).exec(w.loginUrl.toString())[1],E=w.antiForgery.value,R=new URL(`${r}/login`);R.searchParams.append("signin",y);var _={headers:{"Content-Type":"application/x-www-form-urlencoded"}},x={};x.username=a,x.password=c,x.provider=d,x["idsrv.xsrf"]=E,g=o.post(R.toString(),x,_);var m=new RegExp(/code=([^&]*)/).exec(g.url)[1];const v=new URL(`${r}/connect/token`);_={headers:{"Content-Type":"application/x-www-form-urlencoded"}},(x={}).client_id=t,x.client_secret=i,x.code=m,x.code_verifier="0LG2f0VQBDHBiF_h2tVxFtGhVnGB~MpC6ifc-S1MCuZWC8644u7ZrIb3xlDMU.4a53ESoH_yqhi.d1be3fPcVs1.z1Td7R4zncl~-AxrJ2JPPtEUS9joBtbOu.BQyFR8",x.grant_type="authorization_code",x.redirect_uri=l,x.resource=p,g=o.post(v.toString(),x,_)}else{const e=new URL(`${r}/connect/token`),n={scope:u};""===a?(n.grant_type="client_credentials",n.resource=p,n.client_id=t,n.client_secret=i,g=o.post(e.toString(),n,h)):(n.grant_type="password",n.username=a,n.password=c,n.client_id=t,n.client_secret=i,n.resource=p,g=o.post(e.toString(),n))}return e.accessToken=g.json().access_token,e}}},r={},t=function t(n){var o=r[n];if(void 0!==o)return o.exports;var s=r[n]={exports:{}};return e[n](s,s.exports,t),s.exports}(175),n=exports;for(var o in t)n[o]=t[o];t.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})})();