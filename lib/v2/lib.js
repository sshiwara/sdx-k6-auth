(()=>{var e={593:e=>{"use strict";e.exports=require("https://jslib.k6.io/url/1.0.0/index.js")},795:e=>{"use strict";e.exports=require("k6/encoding")},255:e=>{"use strict";e.exports=require("k6/html")},409:e=>{"use strict";e.exports=require("k6/http")},97:(e,r,t)=>{const n=t(409);e.exports.get=function(e,r){return n.get(e,r)},e.exports.post=function(e,r,t){return n.post(e,r,t)}},175:(e,r,t)=>{const n=t(934),s=t(731),o=t(97);e.exports.getAuthorizationToken=function(e){if(void 0!==__ENV.WEB_CLIENT_URL||""!==__ENV.WEB_CLIENT_URL.trim()){var r=__ENV.WEB_CLIENT_USERNAME,t=__ENV.WEB_CLIENT_PASSWORD,a=__ENV.WEB_CLIENT_URL;!1===a.endsWith("/")&&(a+="/"),a+="settings.js";let n=o.get(a);200!==n.status&&console.error(`Request to ${n.request.url} returned with status ${n.status}`);var i=new RegExp(/clientId:([^,\r\n}]*)/).exec(n.body);null==i&&(i=new RegExp(/"clientId":([^,\r\n}]*)/).exec(n.body));var c,d=i[1].trim().replace(/"/g,"");c=null!=(i=new RegExp(/scopes:([^,\r\n}]*)/).exec(n.body))&&i.length>=1?i[1].trim().replace(/"/g,""):"ingr.api",null==(i=new RegExp(/redirectUri:([^,\r\n}]*)/).exec(n.body))&&(i=new RegExp(/"redirectUri":([^,\r\n}]*)/).exec(n.body));var p,l=i[1].trim().replace(/"/g,"");null==(i=new RegExp(/identityProvider:([^,\r\n}]*)/).exec(n.body))&&(i=new RegExp(/"identityProvider":([^,\r\n}]*)/).exec(n.body)),p=i[1].trim().replace(/"/g,"");var u=void 0;null!=(i=new RegExp(/resource:([^,\r\n}]*)/).exec(n.body))&&i.length>=1&&(u=i[1].trim().replace(/"/g,"")),null==(i=new RegExp(/usePKCE:([^,\r\n}]*)/).exec(n.body))&&(i=new RegExp(/"usePKCE":([^,\r\n}]*)/).exec(n.body));var g=i[1].trim().replace(/"/g,"");null==(i=new RegExp(/dummyClientSecret:([^,\r\n]*)/).exec(n.body))&&(i=new RegExp(/"dummyClientSecret":([^,\r\n]*)/).exec(n.body)),i.length<1&&void 0===i[1]&&console.error("dummyClientSecret not found.");var h=i[1].trim().replace(/"/g,"");null==(i=new RegExp(/url:([^,\r\n}]*)/).exec(n.body))&&(i=new RegExp(/"url":([^,\r\n}]*)/).exec(n.body));var _=i[1].trim().replace(/"/g,"");!1===_.endsWith("/")&&(_+="/");var x=new URL(_),m=x.pathname.split("/").filter((e=>e)),w="";m.length>=1&&(w=x.origin+"/"+m[0]),n=o.get(_+"description");var y=JSON.parse(n.body.replace(/[\r\n\t]/g,"")),R=y.TokenIssuerUri;void 0!==u&&""!==u||(u=y.TokenAudience),void 0!==e&&""!==e||(e={},e=void 0===p||""===p?{OKTA:{authURL:R,clientId:d,clientSecret:h,scopes:c,usePKCE:g,odataURL:_,odataBaseURL:w,redirectUri:l,userCredential:{username:r,password:t}}}:{SAM:{authURL:R,clientId:d,clientSecret:h,scopes:c,usePKCE:g,odataURL:_,odataBaseURL:w,redirectUri:l,identityProvider:p,resource:u,userCredential:{username:r,password:t}}})}return console.debug("Settings: "+JSON.stringify(e)),void 0!==e.OKTA?n.getOktaAuthorizationToken(e.OKTA):s.getSamAuthorizationToken(e.SAM)}},934:(e,r,t)=>{const n=t(795),s=t(593),o=t(97);e.exports.getOktaAuthorizationToken=function(e){const r=e.authURL,t=e.clientId,a=e.usePKCE,i=e.userCredential.username,c=e.userCredential.password,d=e.clientSecret,p=e.redirectUri,l=e.scopes,u="state";var g="";let h;if("true"===a.toLowerCase()){const e=`${new s.URL(r).origin}/api/v1/authn`;var _={username:i,password:c},x={headers:{"Content-Type":"application/json"}};h=o.post(e,JSON.stringify(_),x),g=JSON.parse(h.body).sessionToken;const n=new s.URL(`${r}/v1/authorize`);n.searchParams.append("client_id",t),n.searchParams.append("code_challenge","h80cqY8rnCLt6_4c9K3uaaitV5M26tROeoqFIUIl-BI"),n.searchParams.append("code_challenge_method","S256"),n.searchParams.append("redirect_uri",p),n.searchParams.append("response_type","code"),n.searchParams.append("sessionToken",g),n.searchParams.append("state",u),n.searchParams.append("nonce","nonce"),n.searchParams.append("scope",l),x={headers:{"Content-Type":"application/json"},redirects:0},h=o.get(n.toString(),x);var m=new RegExp(/code=([^&]*)/).exec(h.headers.Location.toString())[1];const a=new s.URL(`${r}/v1/token`);a.searchParams.append("state",u);const d={};d.client_id=t,d.grant_type="authorization_code",d.redirect_uri=p,d.code=m,d.code_verifier="0LG2f0VQBDHBiF_h2tVxFtGhVnGB~MpC6ifc-S1MCuZWC8644u7ZrIb3xlDMU.4a53ESoH_yqhi.d1be3fPcVs1.z1Td7R4zncl~-AxrJ2JPPtEUS9joBtbOu.BQyFR8",h=o.post(a.toString(),d,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}else{const e=new s(`${new s.URL(r).origin}/v1/token`),a={scope:l};if(""===i){a.grant_type="client_credentials";const r={auth:"basic",headers:{Authorization:`Basic ${n.b64encode(`${t}:${d}`)}`}};h=o.post(e.toString(),a,r)}else a.grant_type="password",a.username=i,a.password=c,a.client_id=t,a.client_secret=d,h=o.post(e.toString(),a)}return e.accessToken=h.json().access_token,e.sessionID=g,e}},731:(e,r,t)=>{const n=t(255),s=t(97);e.exports.getSamAuthorizationToken=function(e){const r=e.authURL,t=e.clientId,o=e.usePKCE,a=e.userCredential.username,i=e.userCredential.password,c=e.clientSecret,d=e.identityProvider,p=e.resource,l=e.redirectUri,u=e.scopes;let g;if("true"===o.toLowerCase()){const e=new URL(`${r}/connect/authorize`);e.searchParams.append("client_id",t),e.searchParams.append("client_secret",c),e.searchParams.append("code_challenge","h80cqY8rnCLt6_4c9K3uaaitV5M26tROeoqFIUIl-BI"),e.searchParams.append("code_challenge_method","S256"),e.searchParams.append("redirect_uri",l),e.searchParams.append("response_type","code"),e.searchParams.append("state","state"),e.searchParams.append("nonce","nonce"),e.searchParams.append("scope",u),e.searchParams.append("acr_values",`idp:${d}`);var h={headers:{"Content-Type":"application/x-www-form-urlencoded"}};g=s.get(e.toString());const o=n.parseHTML(g.body).find("html").children("body").children("script").text(),w=JSON.parse(o.replace(/&quot;/g,'"')),y=new RegExp(/signin=([^&]*)/).exec(w.loginUrl.toString())[1],R=w.antiForgery.value,E=new URL(`${r}/login`);E.searchParams.append("signin",y);var _={headers:{"Content-Type":"application/x-www-form-urlencoded"}},x={};x.username=a,x.password=i,x.provider=d,x["idsrv.xsrf"]=R,g=s.post(E.toString(),x,_);var m=new RegExp(/code=([^&]*)/).exec(g.url)[1];const v=new URL(`${r}/connect/token`);_={headers:{"Content-Type":"application/x-www-form-urlencoded"}},(x={}).client_id=t,x.client_secret=c,x.code=m,x.code_verifier="0LG2f0VQBDHBiF_h2tVxFtGhVnGB~MpC6ifc-S1MCuZWC8644u7ZrIb3xlDMU.4a53ESoH_yqhi.d1be3fPcVs1.z1Td7R4zncl~-AxrJ2JPPtEUS9joBtbOu.BQyFR8",x.grant_type="authorization_code",x.redirect_uri=l,x.resource=p,g=s.post(v.toString(),x,_)}else{const e=new URL(`${r}/connect/token`),n={scope:u};""===a?(n.grant_type="client_credentials",n.resource=p,n.client_id=t,n.client_secret=c,g=s.post(e.toString(),n,h)):(n.grant_type="password",n.username=a,n.password=i,n.client_id=t,n.client_secret=c,n.resource=p,g=s.post(e.toString(),n))}return e.accessToken=g.json().access_token,e}}},r={},t=function t(n){var s=r[n];if(void 0!==s)return s.exports;var o=r[n]={exports:{}};return e[n](o,o.exports,t),o.exports}(175),n=exports;for(var s in t)n[s]=t[s];t.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})})();